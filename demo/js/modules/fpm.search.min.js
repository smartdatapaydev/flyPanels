!function(e,r){"function"==typeof define&&define.amd?define([],r(e)):"object"==typeof exports?module.exports=r(e):e.fpm_search=r(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function r(t){o("hide"),i.searchPanel.querySelector(".flypanels-searchresult").innerHTML="",i.searchPanel.querySelector(".resultinfo .query").innerHTML=t,i.searchPanel.querySelector(".resultinfo .num").innerHTML=0;var e=i.searchPanel.querySelector(".searchbox").getAttribute("data-searchurl")+"&q="+t,n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){var e,r;200<=n.status&&n.status<400?!1!==(r=function(e){try{var r=JSON.parse(e);if(r&&typeof r==="object"&&r!==null)return r}catch(e){}return console.warn("Error parsing JSON file"),false}(n.response))&&0<(e=r.Items.length)?(!0===i.saveQueryCookie&&p.set("searchQuery",t,null,"/"),r=function(e){var r="<ul>",t;for(t in e)if(e[t].Type==="Page")r+='<li><a href="'+e[t].LinkUrl+'"><span class="type"><i class="fa page"></i></span><span class="link">'+e[t].Header+"</span></a>";else r+='<li><a href="'+e[t].LinkUrl+'"><span class="type"><i class="fa doc"></i></span><span class="link">'+e[t].Header+"</span></a>";return r+="</ul>"}(r.Items),i.searchPanel.querySelector(".resultinfo .query").innerHTML=t,i.searchPanel.querySelector(".resultinfo .num").innerHTML=e,i.searchPanel.querySelector(".flypanels-searchresult").innerHTML=r,h=document.querySelectorAll(".flypanels-button-right, .flypanels-right .searchbutton, #flypanels-searchfield, .flypanels-searchresult ul li a"),a("hide"),i.searchPanel.querySelector(".resultinfo").removeAttribute("hidden"),i.searchPanel.querySelector(".resultinfo").setAttribute("aria-hidden","false"),i.searchPanel.querySelector(".flypanels-searchresult").removeAttribute("hidden"),i.searchPanel.querySelector(".flypanels-searchresult").setAttribute("aria-hidden","false"),c("onSearchSuccess")):(c("onEmptySearchResult"),!0===i.saveQueryCookie&&p.remove("searchQuery","/"),a("hide"),o("show")):(o("show"),a("hide"),c("onSearchError"))},n.onerror=function(){o("show")},n.send()}function o(e){"hide"===e?(i.searchPanel.querySelector(".errormsg").setAttribute("hidden",""),i.searchPanel.querySelector(".errormsg").setAttribute("aria-hidden","true")):(i.searchPanel.querySelector(".errormsg").removeAttribute("hidden"),i.searchPanel.querySelector(".errormsg").setAttribute("aria-hidden","false"))}function a(e){"hide"===e?i.searchPanel.querySelector(".errormsg").setAttribute("hidden",""):i.searchPanel.querySelector(".errormsg").removeAttribute("hidden")}function s(e,r){return!(void 0===e.classList||!e.classList.contains(r))}function c(e){void 0!==i[e]&&i[e].call(u)}function l(e,r,t){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.call(t,e[n],n,e);else for(var o=0,a=e.length;o<a;o++)r.call(t,e[o],o,e)}var i,u,h,d={},f=!!document.querySelector&&!!e.addEventListener,y={saveQueryCookie:!1,searchPanel:document.querySelector("#flypanels-search .searchpanel"),onInit:function(){},onDestroy:function(){},onEmptySearchResult:function(){},onSearchError:function(){},onSearchSuccess:function(){}},p={get:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(e,r,t,n,o,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(t)switch(t.constructor){case Number:s=t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+t;break;case String:s="; expires="+t;break;case Date:s="; expires="+t.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(r)+s+(o?"; domain="+o:"")+(n?"; path="+n:"")+(a?"; secure":""),!0},remove:function(e,r,t){return!!this.has(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(t?"; domain="+t:"")+(r?"; path="+r:""),!0)},has:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),r=e.length,t=0;t<r;t++)e[t]=decodeURIComponent(e[t]);return e}};return d.destroy=function(){i&&(document.documentElement.classList.remove(i.initClass),document.removeEventListener("click",eventHandler,!1),i=null,c("onDestroy"))},d.init=function(e){var t,n,o;f&&(d.destroy(),n=e||{},o={},l(t=y,function(e,r){o[r]=t[r]}),l(n,function(e,r){o[r]=n[r]}),i=o,u=document.querySelector(i.container),(-1<navigator.userAgent.toLowerCase().indexOf("android")||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))&&document.querySelector(".flypanels-searchresult").classList.add("touch"),i.searchPanel.querySelector(".searchbutton").addEventListener("click",function(e){e.preventDefault(),a("show"),r(i.searchPanel.querySelector(".searchbox input").value)}),i.searchPanel.querySelector(".searchbox input").addEventListener("keydown",function(e){13===e.which&&(a("show"),r(this.value))}),!0===p.has("searchQuery")&&!0===i.saveQueryCookie&&r(p.get("searchQuery")),h=h||document.querySelectorAll("#flypanels-searchfield, #flypanels-search .searchbutton"),document.addEventListener("keydown",function(e){s(document.querySelector("body"),"flypanels-open")&&s(document.querySelector("#flypanels-search"),"visible")&&"Tab"===e.key&&((e.shiftKey?0===Array.prototype.indexOf.call(h,e.target)?h[h.length-1]:Array.prototype.indexOf.call(h,e.target)-1<0?h[0]:h[Array.prototype.indexOf.call(h,e.target)-1]:-1===Array.prototype.indexOf.call(h,e.target)||Array.prototype.indexOf.call(h,e.target)+1===h.length?h[0]:h[Array.prototype.indexOf.call(h,e.target)+1]).focus(),e.preventDefault())}),c("onInit"))},d});